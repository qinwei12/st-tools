import{g as E,r as y,H as U,i as fe,w as P,f as N,a as u,T as X,z as G,l as V,A as Z,p as z,h as ve,j as J,I as me,F as ye,k as he,G as ke,J as Ce,K as Oe,q as we,u as ge,s as Ie,o as be,v as Se}from"./index-COb8EODx.js";import{K as pe,z as Pe,e as g,t as S,y as L,n as I,T as K,Q as xe,R as Te,p as Q,c as D,g as W,x as ze,i as R,w as ee,m as p,H as Be,I as M,S as _e,r as Le,b as Ae,G as Ee}from"./index-CVjnhqP_.js";import{P as Ne,N as De}from"./index-BAh_rN2g.js";import{L as Re}from"./index-DL6JXBG6.js";function Me(e,{args:t=[],done:o,canceled:a,error:n}){if(e){const s=e.apply(null,t);pe(s)?s.then(c=>{c?o():a&&a()}).catch(n||Pe):s?o():a&&a()}else o()}function te(e){const t=E();t&&g(t.proxy,e)}let je=2e3;const $e=()=>++je,oe={show:Boolean,zIndex:I,overlay:S,duration:I,teleport:[String,Object],lockScroll:S,lazyRender:S,beforeClose:Function,overlayProps:Object,overlayStyle:Object,overlayClass:L,transitionAppear:Boolean,closeOnClickOverlay:S},ht=Object.keys(oe);function Ke(e,t){return e>t?"horizontal":t>e?"vertical":""}function Ye(){const e=y(0),t=y(0),o=y(0),a=y(0),n=y(0),s=y(0),c=y(""),l=y(!0),d=()=>c.value==="vertical",O=()=>c.value==="horizontal",v=()=>{o.value=0,a.value=0,n.value=0,s.value=0,c.value="",l.value=!0};return{move:m=>{const h=m.touches[0];o.value=(h.clientX<0?0:h.clientX)-e.value,a.value=h.clientY-t.value,n.value=Math.abs(o.value),s.value=Math.abs(a.value);const k=10;(!c.value||n.value<k&&s.value<k)&&(c.value=Ke(n.value,s.value)),l.value&&(n.value>K||s.value>K)&&(l.value=!1)},start:m=>{v(),e.value=m.touches[0].clientX,t.value=m.touches[0].clientY},reset:v,startX:e,startY:t,deltaX:o,deltaY:a,offsetX:n,offsetY:s,direction:c,isVertical:d,isHorizontal:O,isTap:l}}let x=0;const Y="van-overflow-hidden";function Fe(e,t){const o=Ye(),a="01",n="10",s=v=>{o.move(v);const r=o.deltaY.value>0?n:a,f=Te(v.target,e.value),{scrollHeight:m,offsetHeight:h,scrollTop:k}=f;let C="11";k===0?C=h>=m?"00":"01":k+h>=m&&(C="10"),C!=="11"&&o.isVertical()&&!(parseInt(C,2)&parseInt(r,2))&&Q(v,!0)},c=()=>{document.addEventListener("touchstart",o.start),document.addEventListener("touchmove",s,{passive:!1}),x||document.body.classList.add(Y),x++},l=()=>{x&&(document.removeEventListener("touchstart",o.start),document.removeEventListener("touchmove",s),x--,x||document.body.classList.remove(Y))},d=()=>t()&&c(),O=()=>t()&&l();xe(d),U(O),fe(O),P(t,v=>{v?c():l()})}function ne(e){const t=y(!1);return P(e,o=>{o&&(t.value=o)},{immediate:!0}),o=>()=>t.value?o():null}const F=()=>{var e;const{scopeId:t}=((e=E())==null?void 0:e.vnode)||{};return t?{[t]:""}:null},[He,qe]=D("overlay"),Ue={show:Boolean,zIndex:I,duration:I,className:L,lockScroll:S,lazyRender:S,customStyle:Object,teleport:[String,Object]};var Xe=N({name:He,inheritAttrs:!1,props:Ue,setup(e,{attrs:t,slots:o}){const a=y(),n=ne(()=>e.show||!e.lazyRender),s=l=>{e.lockScroll&&Q(l,!0)},c=n(()=>{var l;const d=g(ze(e.zIndex),e.customStyle);return R(e.duration)&&(d.animationDuration=`${e.duration}s`),V(u("div",z({ref:a,style:d,class:[qe(),e.className]},t),[(l=o.default)==null?void 0:l.call(o)]),[[Z,e.show]])});return W("touchmove",s,{target:a}),()=>{const l=u(X,{name:"van-fade",appear:!0},{default:c});return e.teleport?u(G,{to:e.teleport},{default:()=>[l]}):l}}});const Ge=ee(Xe),Ve=g({},oe,{round:Boolean,position:p("center"),closeIcon:p("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:p("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[Ze,H]=D("popup");var Je=N({name:Ze,inheritAttrs:!1,props:Ve,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:o,slots:a}){let n,s;const c=y(),l=y(),d=ne(()=>e.show||!e.lazyRender),O=ve(()=>{const i={zIndex:c.value};if(R(e.duration)){const w=e.position==="center"?"animationDuration":"transitionDuration";i[w]=`${e.duration}s`}return i}),v=()=>{n||(n=!0,c.value=e.zIndex!==void 0?+e.zIndex:$e(),t("open"))},r=()=>{n&&Me(e.beforeClose,{done(){n=!1,t("close"),t("update:show",!1)}})},f=i=>{t("clickOverlay",i),e.closeOnClickOverlay&&r()},m=()=>{if(e.overlay){const i=g({show:e.show,class:e.overlayClass,zIndex:c.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},e.overlayProps);return u(Ge,z(i,F(),{onClick:f}),{default:a["overlay-content"]})}},h=i=>{t("clickCloseIcon",i),r()},k=()=>{if(e.closeable)return u(M,{role:"button",tabindex:0,name:e.closeIcon,class:[H("close-icon",e.closeIconPosition),Be],classPrefix:e.iconPrefix,onClick:h},null)};let C;const le=()=>{C&&clearTimeout(C),C=setTimeout(()=>{t("opened")})},ce=()=>t("closed"),ie=i=>t("keydown",i),re=d(()=>{var i;const{destroyOnClose:w,round:A,position:B,safeAreaInsetTop:ue,safeAreaInsetBottom:de,show:$}=e;if(!(!$&&w))return V(u("div",z({ref:l,style:O.value,role:"dialog",tabindex:0,class:[H({round:A,[B]:B}),{"van-safe-area-top":ue,"van-safe-area-bottom":de}],onKeydown:ie},o,F()),[(i=a.default)==null?void 0:i.call(a),k()]),[[Z,$]])}),j=()=>{const{position:i,transition:w,transitionAppear:A}=e,B=i==="center"?"van-fade":`van-popup-slide-${i}`;return u(X,{name:w||B,appear:A,onAfterEnter:le,onAfterLeave:ce},{default:re})};return P(()=>e.show,i=>{i&&!n&&(v(),o.tabindex===0&&he(()=>{var w;(w=l.value)==null||w.focus()})),!i&&n&&(n=!1,t("close"))}),te({popupRef:l}),Fe(l,()=>e.show&&e.lockScroll),W("popstate",()=>{e.closeOnPopstate&&(r(),s=!1)}),J(()=>{e.show&&v()}),me(()=>{s&&(t("update:show",!0),s=!1)}),U(()=>{e.show&&e.teleport&&(r(),s=!0)}),ke(Ne,()=>e.show),()=>e.teleport?u(G,{to:e.teleport},{default:()=>[m(),j()]}):u(ye,null,[m(),j()])}});const Qe=ee(Je);let T=0;function We(e){e?(T||document.body.classList.add("van-toast--unclickable"),T++):T&&(T--,T||document.body.classList.remove("van-toast--unclickable"))}const[et,b]=D("toast"),tt=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],ot={icon:String,show:Boolean,type:p("text"),overlay:Boolean,message:I,iconSize:I,duration:_e(2e3),position:p("middle"),teleport:[String,Object],wordBreak:String,className:L,iconPrefix:String,transition:p("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:L,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:I};var nt=N({name:et,props:ot,emits:["update:show"],setup(e,{emit:t,slots:o}){let a,n=!1;const s=()=>{const r=e.show&&e.forbidClick;n!==r&&(n=r,We(n))},c=r=>t("update:show",r),l=()=>{e.closeOnClick&&c(!1)},d=()=>clearTimeout(a),O=()=>{const{icon:r,type:f,iconSize:m,iconPrefix:h,loadingType:k}=e;if(r||f==="success"||f==="fail")return u(M,{name:r||f,size:m,class:b("icon"),classPrefix:h},null);if(f==="loading")return u(Re,{class:b("loading"),size:m,type:k},null)},v=()=>{const{type:r,message:f}=e;if(o.message)return u("div",{class:b("text")},[o.message()]);if(R(f)&&f!=="")return r==="html"?u("div",{key:0,class:b("text"),innerHTML:String(f)},null):u("div",{class:b("text")},[f])};return P(()=>[e.show,e.forbidClick],s),P(()=>[e.show,e.type,e.message,e.duration],()=>{d(),e.show&&e.duration>0&&(a=setTimeout(()=>{c(!1)},e.duration))}),J(s),Ce(s),()=>u(Qe,z({class:[b([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:l,onClosed:d,"onUpdate:show":c},Le(e,tt)),{default:()=>[O(),v()]})}});function at(){const e=we({show:!1}),t=n=>{e.show=n},o=n=>{g(e,n,{transitionAppear:!0}),t(!0)},a=()=>t(!1);return te({open:o,close:a,toggle:t}),{open:o,close:a,state:e,toggle:t}}function st(e){const t=Oe(e),o=document.createElement("div");return document.body.appendChild(o),{instance:t.mount(o),unmount(){t.unmount(),document.body.removeChild(o)}}}const lt={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let _=[],ct=!1,q=g({},lt);const it=new Map;function ae(e){return Ee(e)?e:{message:e}}function rt(){const{instance:e}=st({setup(){const t=y(""),{open:o,state:a,close:n,toggle:s}=at(),c=()=>{},l=()=>u(nt,z(a,{onClosed:c,"onUpdate:show":s}),null);return P(t,d=>{a.message=d}),E().render=l,{open:o,close:n,message:t}}});return e}function ut(){if(!_.length||ct){const e=rt();_.push(e)}return _[_.length-1]}function dt(e={}){if(!Ae)return{};const t=ut(),o=ae(e);return t.open(g({},q,it.get(o.type||q.type),o)),t}const se=e=>t=>dt(g({type:e},ae(t))),kt=se("success"),Ct=se("fail"),Ot={__name:"NavBar",props:{name:{required:!0},icon:{require:!0},size:{require:!0},routeLink:{require:!0}},setup(e){const t=ge(),o=()=>{t.back()},a=n=>{t.push({path:n})};return(n,s)=>{const c=M,l=De;return be(),Ie(l,{fixed:"",title:e.name,"left-text":"返回","left-arrow":"",onClickLeft:o},{right:Se(()=>[u(c,{onClick:s[0]||(s[0]=d=>a(e.routeLink)),name:e.icon,size:e.size},null,8,["name","size"])]),_:1},8,["title"])}}};export{Qe as P,Ot as _,Ye as a,te as b,Me as c,Ct as d,dt as e,nt as f,ht as g,F as h,st as m,oe as p,kt as s,at as u};
