import{c as A,e as E,i as Oe,h as ne,j as q,k as J,n as U,l as he,g as ge,p as se,H as le,t as _,d as L,o as Se,q as Be,r as ie,m as oe,B as Ie,s as Z,w as pe,f as Pe,v as $e,x as De}from"./index-CVjnhqP_.js";import{L as be,B as He}from"./index-DL6JXBG6.js";import{F as _e,C as Me,a as Ee}from"./index-0dDFC7um.js";/* empty css              */import{f as R,r as C,h as B,y as Ae,a as s,w as X,k as re,p as ye,T as Ne,z as Ke,l as ze,A as Ue,q as Le,c as Fe,b as Q,v as Y,F as Re,u as je,o as qe,B as ue,e as Ye}from"./index-COb8EODx.js";import{a as we,b as xe,e as M,_ as Xe,P as Ge}from"./NavBar-jdn0Qz5l.js";/* empty css              */import"./index-VirkDlwM.js";import"./index-BAh_rN2g.js";const[Je,I,ce]=A("picker"),Te=e=>e.find(t=>!t.disabled)||e[0];function We(e,t){const n=e[0];if(n){if(Array.isArray(n))return"multiple";if(t.children in n)return"cascade"}return"default"}function G(e,t){t=ne(t,0,e.length);for(let n=t;n<e.length;n++)if(!e[n].disabled)return n;for(let n=t-1;n>=0;n--)if(!e[n].disabled)return n;return 0}const de=(e,t,n)=>t!==void 0&&e.some(d=>d[n.value]===t);function ae(e,t,n){const d=e.findIndex(p=>p[n.value]===t),c=G(e,d);return e[c]}function Ze(e,t,n){const d=[];let c={[t.children]:e},p=0;for(;c&&c[t.children];){const b=c[t.children],y=n.value[p];if(c=Oe(y)?ae(b,y,t):void 0,!c&&b.length){const f=Te(b)[t.value];c=ae(b,f,t)}p++,d.push(b)}return d}function Qe(e){const{transform:t}=window.getComputedStyle(e),n=t.slice(7,t.length-1).split(", ")[5];return Number(n)}function et(e){return E({text:"text",value:"value",children:"children"},e)}const me=200,ve=300,tt=15,[Ce,ee]=A("picker-column"),Ve=Symbol(Ce);var nt=R({name:Ce,props:{value:U,fields:q(Object),options:J(),readonly:Boolean,allowHtml:Boolean,optionHeight:q(Number),swipeDuration:q(U),visibleOptionNum:q(U)},emits:["change","clickOption","scrollInto"],setup(e,{emit:t,slots:n}){let d,c,p,b,y;const f=C(),m=C(),w=C(0),x=C(0),V=we(),O=()=>e.options.length,u=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,k=a=>{let g=G(e.options,a);const o=-g*e.optionHeight,i=()=>{g>O()-1&&(g=G(e.options,a));const h=e.options[g][e.fields.value];h!==e.value&&t("change",h)};d&&o!==w.value?y=i:i(),w.value=o},r=()=>e.readonly||!e.options.length,v=a=>{d||r()||(y=null,x.value=me,k(a),t("clickOption",e.options[a]))},l=a=>ne(Math.round(-a/e.optionHeight),0,O()-1),S=B(()=>l(w.value)),P=(a,g)=>{const o=Math.abs(a/g);a=w.value+o/.003*(a<0?-1:1);const i=l(a);x.value=+e.swipeDuration,k(i)},T=()=>{d=!1,x.value=0,y&&(y(),y=null)},N=a=>{if(!r()){if(V.start(a),d){const g=Qe(m.value);w.value=Math.min(0,g-u())}x.value=0,c=w.value,p=Date.now(),b=c,y=null}},K=a=>{if(r())return;V.move(a),V.isVertical()&&(d=!0,se(a,!0));const g=ne(c+V.deltaY.value,-(O()*e.optionHeight),e.optionHeight),o=l(g);o!==S.value&&t("scrollInto",e.options[o]),w.value=g;const i=Date.now();i-p>ve&&(p=i,b=g)},D=()=>{if(r())return;const a=w.value-b,g=Date.now()-p;if(g<ve&&Math.abs(a)>tt){P(a,g);return}const i=l(w.value);x.value=me,k(i),setTimeout(()=>{d=!1},0)},H=()=>{const a={height:`${e.optionHeight}px`};return e.options.map((g,o)=>{const i=g[e.fields.text],{disabled:h}=g,j=g[e.fields.value],z={role:"button",style:a,tabindex:h?-1:0,class:[ee("item",{disabled:h,selected:j===e.value}),g.className],onClick:()=>v(o)},ke={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:i};return s("li",z,[n.option?n.option(g,o):s("div",ke,null)])})};return he(Ve),xe({stopMomentum:T}),Ae(()=>{const a=d?Math.floor(-w.value/e.optionHeight):e.options.findIndex(i=>i[e.fields.value]===e.value),g=G(e.options,a),o=-g*e.optionHeight;d&&g<a&&T(),w.value=o}),ge("touchmove",K,{target:f}),()=>s("div",{ref:f,class:ee(),onTouchstartPassive:N,onTouchend:D,onTouchcancel:D},[s("ul",{ref:m,style:{transform:`translate3d(0, ${w.value+u()}px, 0)`,transitionDuration:`${x.value}ms`,transitionProperty:x.value?"all":"none"},class:ee("wrapper"),onTransitionend:T},[H()])])}});const[lt]=A("picker-toolbar"),W={title:String,cancelButtonText:String,confirmButtonText:String},ot=["cancel","confirm","title","toolbar"],at=Object.keys(W);var st=R({name:lt,props:W,emits:["confirm","cancel"],setup(e,{emit:t,slots:n}){const d=()=>{if(n.title)return n.title();if(e.title)return s("div",{class:[I("title"),"van-ellipsis"]},[e.title])},c=()=>t("cancel"),p=()=>t("confirm"),b=()=>{var f;const m=(f=e.cancelButtonText)!=null?f:ce("cancel");if(!(!n.cancel&&!m))return s("button",{type:"button",class:[I("cancel"),le],onClick:c},[n.cancel?n.cancel():m])},y=()=>{var f;const m=(f=e.confirmButtonText)!=null?f:ce("confirm");if(!(!n.confirm&&!m))return s("button",{type:"button",class:[I("confirm"),le],onClick:p},[n.confirm?n.confirm():m])};return()=>s("div",{class:I("toolbar")},[n.toolbar?n.toolbar():[b(),d(),y()]])}});const[it,_t]=A("picker-group"),rt=Symbol(it);E({tabs:J(),activeTab:L(0),nextStepText:String,showToolbar:_},W);const ut=E({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:L(44),showToolbar:_,swipeDuration:L(1e3),visibleOptionNum:L(6)},W),ct=E({},ut,{columns:J(),modelValue:J(),toolbarPosition:oe("top"),columnsFieldNames:Object});var dt=R({name:Je,props:ct,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e,{emit:t,slots:n}){const d=C(),c=C(e.modelValue.slice(0)),{parent:p}=he(rt),{children:b,linkChildren:y}=Se(Ve);y();const f=B(()=>et(e.columnsFieldNames)),m=B(()=>Be(e.optionHeight)),w=B(()=>We(e.columns,f.value)),x=B(()=>{const{columns:o}=e;switch(w.value){case"multiple":return o;case"cascade":return Ze(o,f.value,c);default:return[o]}}),V=B(()=>x.value.some(o=>o.length)),O=B(()=>x.value.map((o,i)=>ae(o,c.value[i],f.value))),u=B(()=>x.value.map((o,i)=>o.findIndex(h=>h[f.value.value]===c.value[i]))),k=(o,i)=>{if(c.value[o]!==i){const h=c.value.slice(0);h[o]=i,c.value=h}},r=()=>({selectedValues:c.value.slice(0),selectedOptions:O.value,selectedIndexes:u.value}),v=(o,i)=>{k(i,o),w.value==="cascade"&&c.value.forEach((h,j)=>{const z=x.value[j];de(z,h,f.value)||k(j,z.length?z[0][f.value.value]:void 0)}),re(()=>{t("change",E({columnIndex:i},r()))})},l=(o,i)=>{const h={columnIndex:i,currentOption:o};t("clickOption",E(r(),h)),t("scrollInto",h)},S=()=>{b.forEach(i=>i.stopMomentum());const o=r();return re(()=>{const i=r();t("confirm",i)}),o},P=()=>t("cancel",r()),T=()=>x.value.map((o,i)=>s(nt,{value:c.value[i],fields:f.value,options:o,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:m.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:h=>v(h,i),onClickOption:h=>l(h,i),onScrollInto:h=>{t("scrollInto",{currentOption:h,columnIndex:i})}},{option:n.option})),N=o=>{if(V.value){const i={height:`${m.value}px`},h={backgroundSize:`100% ${(o-m.value)/2}px`};return[s("div",{class:I("mask"),style:h},null),s("div",{class:[Ie,I("frame")],style:i},null)]}},K=()=>{const o=m.value*+e.visibleOptionNum,i={height:`${o}px`};return!e.loading&&!V.value&&n.empty?n.empty():s("div",{ref:d,class:I("columns"),style:i},[T(),N(o)])},D=()=>{if(e.showToolbar&&!p)return s(st,ye(ie(e,at),{onConfirm:S,onCancel:P}),ie(n,ot))},H=o=>{o.forEach((i,h)=>{i.length&&!de(i,c.value[h],f.value)&&k(h,Te(i)[f.value.value])})};X(x,o=>H(o),{immediate:!0});let a;return X(()=>e.modelValue,o=>{!Z(o,c.value)&&!Z(o,a)&&(c.value=o.slice(0),a=o.slice(0)),e.modelValue.length===0&&H(x.value)},{deep:!0}),X(c,o=>{Z(o,e.modelValue)||(a=o.slice(0),t("update:modelValue",a))},{immediate:!0}),ge("touchmove",se,{target:d}),xe({confirm:S,getSelectedOptions:()=>O.value}),()=>{var o,i;return s("div",{class:I()},[e.toolbarPosition==="top"?D():null,e.loading?s(be,{class:I("loading")},null):null,(o=n["columns-top"])==null?void 0:o.call(n),K(),(i=n["columns-bottom"])==null?void 0:i.call(n),e.toolbarPosition==="bottom"?D():null])}}});const mt=pe(dt),[vt,F]=A("key"),ft=s("svg",{class:F("collapse-icon"),viewBox:"0 0 30 24"},[s("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),ht=s("svg",{class:F("delete-icon"),viewBox:"0 0 32 22"},[s("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var te=R({name:vt,props:{type:String,text:U,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(e,{emit:t,slots:n}){const d=C(!1),c=we(),p=m=>{c.start(m),d.value=!0},b=m=>{c.move(m),c.direction.value&&(d.value=!1)},y=m=>{d.value&&(n.default||se(m),d.value=!1,t("press",e.text,e.type))},f=()=>{if(e.loading)return s(be,{class:F("loading-icon")},null);const m=n.default?n.default():e.text;switch(e.type){case"delete":return m||ht;case"extra":return m||ft;default:return m}};return()=>s("div",{class:F("wrapper",{wider:e.wider}),onTouchstartPassive:p,onTouchmovePassive:b,onTouchend:y,onTouchcancel:y},[s("div",{role:"button",tabindex:0,class:F([e.color,{large:e.large,active:d.value,delete:e.type==="delete"}])},[f()])])}});const[gt,$]=A("number-keyboard"),pt={show:Boolean,title:String,theme:oe("default"),zIndex:U,teleport:[String,Object],maxlength:L(1/0),modelValue:oe(""),transition:_,blurOnClose:_,showDeleteKey:_,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:_,safeAreaInsetBottom:_,extraKey:{type:[String,Array],default:""}};function bt(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1)),d=e[t];e[t]=e[n],e[n]=d}return e}var yt=R({name:gt,inheritAttrs:!1,props:pt,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(e,{emit:t,slots:n,attrs:d}){const c=C(),p=()=>{const r=Array(9).fill("").map((v,l)=>({text:l+1}));return e.randomKeyOrder&&bt(r),r},b=()=>[...p(),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],y=()=>{const r=p(),{extraKey:v}=e,l=Array.isArray(v)?v:[v];return l.length===0?r.push({text:0,wider:!0}):l.length===1?r.push({text:0,wider:!0},{text:l[0],type:"extra"}):l.length===2&&r.push({text:l[0],type:"extra"},{text:0},{text:l[1],type:"extra"}),r},f=B(()=>e.theme==="custom"?y():b()),m=()=>{e.show&&t("blur")},w=()=>{t("close"),e.blurOnClose&&m()},x=()=>t(e.show?"show":"hide"),V=(r,v)=>{if(r===""){v==="extra"&&m();return}const l=e.modelValue;v==="delete"?(t("delete"),t("update:modelValue",l.slice(0,l.length-1))):v==="close"?w():l.length<+e.maxlength&&(t("input",r),t("update:modelValue",l+r))},O=()=>{const{title:r,theme:v,closeButtonText:l}=e,S=n["title-left"],P=l&&v==="default";if(r||P||S)return s("div",{class:$("header")},[S&&s("span",{class:$("title-left")},[S()]),r&&s("h2",{class:$("title")},[r]),P&&s("button",{type:"button",class:[$("close"),le],onClick:w},[l])])},u=()=>f.value.map(r=>{const v={};return r.type==="delete"&&(v.default=n.delete),r.type==="extra"&&(v.default=n["extra-key"]),s(te,{key:r.text,text:r.text,type:r.type,wider:r.wider,color:r.color,onPress:V},v)}),k=()=>{if(e.theme==="custom")return s("div",{class:$("sidebar")},[e.showDeleteKey&&s(te,{large:!0,text:e.deleteButtonText,type:"delete",onPress:V},{default:n.delete}),s(te,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:V},null)])};return X(()=>e.show,r=>{e.transition||t(r?"show":"hide")}),e.hideOnClickOutside&&Pe(c,m,{eventName:"touchstart"}),()=>{const r=O(),v=s(Ne,{name:e.transition?"van-slide-up":""},{default:()=>[ze(s("div",ye({ref:c,style:De(e.zIndex),class:$({unfit:!e.safeAreaInsetBottom,"with-title":!!r}),onAnimationend:x,onTouchstartPassive:$e},d),[r,s("div",{class:$("body")},[s("div",{class:$("keys")},[u()]),k()])]),[[Ue,e.show]])]});return e.teleport?s(Ke,{to:e.teleport},{default:()=>[v]}):v}}});const wt=pe(yt),xt=e=>{navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(e).then(()=>{M({message:"信息已复制到剪贴板",position:"middle",type:"success"})}).catch(()=>{fe(e)}):fe(e)},fe=e=>{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy"),M({message:"信息已复制到剪贴板",position:"middle",type:"success"})}catch{M({message:"复制失败，请手动复制",position:"middle",type:"fail"})}document.body.removeChild(t)},Tt={class:"p-4 pt-16 -mt-4"},Ct={style:{margin:"16px"}},Vt=["innerHTML"],Mt={__name:"Withdrawal",setup(e){je();const t=/^1[3-9]\d{9}$/,n=/^[1-9]\d{5}(18|19|20)\d{2}[01]\d[0-3]\d{4}[0-9Xx]$/,d=[{text:"营业部",value:"营业部"},{text:"城西",value:"城西支行"},{text:"和平",value:"和平支行"},{text:"白龙",value:"白龙支行"},{text:"怀远",value:"怀远支行"},{text:"德胜",value:"德胜支行"}],c=C(""),p=C(!1),b=C(localStorage.getItem("pickerValue")?JSON.parse(localStorage.getItem("pickerValue")):[]),y=({selectedValues:v,selectedOptions:l})=>{p.value=!1,b.value=v,c.value=l[0].text},f=C(!1),m=C(!1),w=v=>{u.idCard+=v},x=()=>{u.idCard=u.idCard.slice(0,-1)},V=v=>{u.phone+=v},O=()=>{u.phone=u.phone.slice(0,-1)},u=Le({name:"",withdrawalAmount:"",address:"",idCard:"",phone:"",withdrawalUse:""}),k=C(""),r=()=>{if(b.value.length===0||!u.name||!u.withdrawalAmount||!u.address||!u.idCard||!u.phone||!u.withdrawalUse){M({message:"请填写完整信息",position:"middle",type:"fail"});return}else if(/^[1-9]\d*$/.test(u.withdrawalAmount))if(/^[1-9]\d{5}(18|19|20)\d{2}[01]\d[0-3]\d{4}[0-9Xx]$/.test(u.idCard)){if(!/^1[3-9]\d{9}$/.test(u.phone)){M({message:"请填写正确的手机号码",position:"middle",type:"fail"});return}}else{M({message:"请填写正确的身份证号",position:"middle",type:"fail"});return}else{M({message:"请填写正确的取款金额",position:"middle",type:"fail"});return}k.value=[`资金取现报备/资金取现协查银行网点: 宜州深通村镇银行${b.value};`,`取现金额: ${u.withdrawalAmount}元;`,`取现人: ${u.name};`,`取现人现实际居住地址: ${u.address};`,`身份证号码: ${u.idCard};`,`手机号: ${u.phone}（银行工作人员现场拨打核对确认号码准确）;`,`取款用途: ${u.withdrawalUse};`].join("<br />");const v=k.value.replace(/<br\s*\/?>/gi,`
`);xt(v),localStorage.setItem("pickerValue",JSON.stringify(b.value))};return(v,l)=>{const S=mt,P=Ge,T=Ee,N=Me,K=He,D=_e,H=wt;return qe(),Fe(Re,null,[s(Xe,{name:"每日取款报备"}),Q("div",Tt,[s(P,{show:p.value,"onUpdate:show":l[1]||(l[1]=a=>p.value=a),"destroy-on-close":"",round:"",position:"bottom"},{default:Y(()=>[s(S,{"model-value":b.value,columns:d,onCancel:l[0]||(l[0]=a=>p.value=!1),onConfirm:y},null,8,["model-value"])]),_:1},8,["show"]),s(D,{onSubmit:r},{default:Y(()=>[s(N,{inset:""},{default:Y(()=>[s(T,{modelValue:c.value,"onUpdate:modelValue":l[2]||(l[2]=a=>c.value=a),"is-link":"",readonly:"",label:"部门",placeholder:b.value,onClick:l[3]||(l[3]=a=>p.value=!0)},null,8,["modelValue","placeholder"]),s(T,{modelValue:u.name,"onUpdate:modelValue":l[4]||(l[4]=a=>u.name=a),name:"name",label:"客户名称",placeholder:"客户名称",rules:[{required:!0,message:"请填写客户名称"}]},null,8,["modelValue"]),s(T,{modelValue:u.withdrawalAmount,"onUpdate:modelValue":l[5]||(l[5]=a=>u.withdrawalAmount=a),name:"withdrawalAmount",label:"取款金额",placeholder:"取款金额（元）",type:"number",rules:[{required:!0,message:"请填写正确的取款金额"}]},null,8,["modelValue"]),s(T,{modelValue:u.address,"onUpdate:modelValue":l[6]||(l[6]=a=>u.address=a),name:"address",label:"地址",placeholder:"地址",rules:[{required:!0,message:"请填写地址"}]},null,8,["modelValue"]),s(T,{modelValue:u.idCard,"onUpdate:modelValue":l[7]||(l[7]=a=>u.idCard=a),name:"idCard",label:"身份证号",placeholder:"身份证号",readonly:"",onTouchstart:l[8]||(l[8]=ue(a=>f.value=!0,["stop"])),rules:[{pattern:n,message:"请填写正确的身份证号"}]},null,8,["modelValue","rules"]),s(T,{modelValue:u.phone,"onUpdate:modelValue":l[9]||(l[9]=a=>u.phone=a),name:"手机手机号码",label:"手机手机号码",placeholder:"手机号码",readonly:"",onTouchstart:l[10]||(l[10]=ue(a=>m.value=!0,["stop"])),rules:[{pattern:t,message:"请填写正确的手机号码"}]},null,8,["modelValue","rules"]),s(T,{modelValue:u.withdrawalUse,"onUpdate:modelValue":l[11]||(l[11]=a=>u.withdrawalUse=a),name:"withdrawalUse",label:"取款用途",placeholder:"取款用途",rules:[{required:!0,message:"请填写取款用途"}]},null,8,["modelValue"])]),_:1}),Q("div",Ct,[s(K,{round:"",block:"",type:"primary",onClick:r,"native-type":"submit"},{default:Y(()=>[...l[14]||(l[14]=[Ye(" 提交 ",-1)])]),_:1})])]),_:1}),s(H,{show:f.value,"extra-key":"X","close-button-text":"完成",onBlur:l[12]||(l[12]=a=>f.value=!1),onInput:w,onDelete:x},null,8,["show"]),s(H,{show:m.value,theme:"custom","extra-key":".","close-button-text":"完成",onBlur:l[13]||(l[13]=a=>m.value=!1),onInput:V,onDelete:O},null,8,["show"]),Q("div",{class:"p-5 text-[#555]",innerHTML:k.value},null,8,Vt)])],64)}}};export{Mt as default};
