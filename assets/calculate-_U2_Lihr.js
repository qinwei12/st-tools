import{m as M,t as N,c as P,w as B}from"./index-CVjnhqP_.js";import{D,a as U}from"./index-CXbKzwPw.js";import{B as I}from"./index-DL6JXBG6.js";/* empty css              */import{C as E,a as A,b as q,F as S}from"./index-0dDFC7um.js";import{_ as J,d as $,s as z}from"./NavBar-jdn0Qz5l.js";import{f as G,a as t,r as L,q as _,y as O,c as R,b as g,v as c,F as k,o as C,e as x,d as j,s as H,C as F,D as Q}from"./index-COb8EODx.js";import"./index-BAh_rN2g.js";const[W,X]=P("divider"),Y={dashed:Boolean,hairline:N,vertical:Boolean,contentPosition:M("center")};var Z=G({name:W,props:Y,setup(i,{slots:d}){return()=>{var u;return t("div",{role:"separator",class:X({dashed:i.dashed,hairline:i.hairline,vertical:i.vertical,[`content-${i.contentPosition}`]:!!d.default&&!i.vertical})},[!i.vertical&&((u=d.default)==null?void 0:u.call(d))])}}});const ee=B(Z),ae={class:"p-4 pt-16 -mt-6"},te={style:{margin:"16px"}},ce={__name:"calculate",setup(i){const d=L(!1),u=L(""),e=_({property:"",monthlyRevenue:"",monthlyNetIncome:"",bankLiability:"",creditCardUsage:"",otherLoanMonthly:"",livingExpenses:"",loanAmount:"",loanMonthlyPayment:"",otherVal10:"",loanVal11:"",pass12:""}),K=_([{dataKey:"property",data:e.property,type:"number",label:"物业（房产、地皮、厂房）",placeholder:"农村房屋按0.08万/平"},{dataKey:"monthlyRevenue",data:e.monthlyRevenue,type:"number",label:"月营业额",placeholder:"月销售额（万）"},{dataKey:"monthlyNetIncome",data:e.monthlyNetIncome,type:"number",label:"月净收入",placeholder:"请输入净收入（万）"},{dataKey:"bankLiability",data:e.bankLiability,type:"number",label:"银行负债",placeholder:"负债余额（万）"},{dataKey:"creditCardUsage",data:e.creditCardUsage,type:"number",label:"信用卡近六个月平均使用额度",placeholder:"请输入使用额度（万）"},{dataKey:"otherLoanMonthly",data:e.otherLoanMonthly,type:"number",label:"他行月供",placeholder:"名下贷款月供（万）"},{dataKey:"livingExpenses",data:e.livingExpenses,type:"number",label:"生活费",placeholder:"每人按0.08万元计算（万）"},{dataKey:"loanAmount",data:e.loanAmount,type:"number",label:"本笔贷款金额",placeholder:"单位（万）"},{dataKey:"loanMonthlyPayment",data:e.loanMonthlyPayment,type:"number",label:"本笔月供",placeholder:"单位（万）"},{dataKey:"otherVal10",data:e.otherVal10,type:"number",label:"其他资产",placeholder:"车子、囤货、库存（万）"},{dataKey:"loanVal11",data:e.loanVal11,type:"number",label:"经营贷余额",placeholder:"单位（万）"},{dataKey:"pass12",data:e.pass12,type:"number",label:"应收账款",placeholder:"单位（万）"}]),l=_({propertyCalculation:0,shortTermRepayment:0,longTermRepayment:0,assetLiabilityRatio1:0,assetLiabilityRatio2:0,businessLoanCalculation:0,LTV:0}),o=s=>{const a=parseFloat(s);return isNaN(a)?0:a};O(()=>{const s=o(e.property),a=o(e.monthlyRevenue),p=o(e.monthlyNetIncome),m=o(e.bankLiability),y=o(e.creditCardUsage),r=o(e.otherLoanMonthly),b=o(e.livingExpenses),h=o(e.loanAmount),v=o(e.loanMonthlyPayment),n=o(e.otherVal10),f=o(e.loanVal11),V=o(e.pass12);l.propertyCalculation=(s*1.2-m-y).toFixed(2,1),l.shortTermRepayment=((p-b)*.7*60-m).toFixed(2,1),l.longTermRepayment=((p-b-r)*.7*60).toFixed(2,1),l.assetLiabilityRatio1=((m+h+y)/(s+h+n+V)*100).toFixed(2,1),l.assetLiabilityRatio2=((r+v)/(b-p)*100).toFixed(2,1),l.businessLoanCalculation=(a*2-f).toFixed(2,1),l.LTV=(s*.9*.8).toFixed(2,1)});const w=()=>{if(u.value==="")return $("备注不能为空");const s={formData:F(e),calculationResults:F(l)};console.log(JSON.stringify(s));try{const a=U(u.value,s);z("添加成功！"),Q.push("/history")}catch(a){console.log(a)}},T=()=>{};return(s,a)=>{const p=ee,m=A,y=E,r=q,b=I,h=S,v=D;return C(),R(k,null,[t(J,{name:"三项测算计算",icon:"clock-o",routeLink:"/history",size:20}),g("div",ae,[t(p,{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0 16px"}},{default:c(()=>[...a[3]||(a[3]=[x(" 测算数据 ",-1)])]),_:1}),t(y,{inset:""},{default:c(()=>[(C(!0),R(k,null,j(K,(n,f)=>(C(),H(m,{key:f,modelValue:e[n.dataKey],"onUpdate:modelValue":V=>e[n.dataKey]=V,type:n.type,label:n.label,placeholder:n.placeholder},null,8,["modelValue","onUpdate:modelValue","type","label","placeholder"]))),128))]),_:1}),t(p,{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0 16px"}},{default:c(()=>[...a[4]||(a[4]=[x(" 测算结果 ",-1)])]),_:1}),t(y,{class:"-mt-4 p-4"},{default:c(()=>[t(r,{title:"物业测算 (万元)",value:l.propertyCalculation},null,8,["value"]),t(r,{title:"还款能力测算公式一（短期还债能力）",value:l.shortTermRepayment},null,8,["value"]),t(r,{title:"还款能力测算公式二（长期还债能力）",value:l.longTermRepayment},null,8,["value"]),t(r,{title:"资产负债比 ( <= 75%)",value:Math.abs(l.assetLiabilityRatio1)+"%"},null,8,["value"]),t(r,{title:"收入支出比 ( <= 65%)",value:Math.abs(l.assetLiabilityRatio2)+"%"},null,8,["value"]),t(r,{title:"经营贷测算 (万元)",value:l.businessLoanCalculation},null,8,["value"]),t(r,{title:"抵押率 ( <= 80%)",value:l.LTV+"%"},null,8,["value"])]),_:1}),g("div",te,[t(b,{round:"",block:"",type:"primary",onClick:a[0]||(a[0]=()=>d.value=!0),"native-type":"submit"},{default:c(()=>[...a[5]||(a[5]=[x(" 保存测算 ",-1)])]),_:1})])]),t(v,{show:d.value,"onUpdate:show":a[2]||(a[2]=n=>d.value=n),title:"请添加备注","show-cancel-button":"",onConfirm:w,onCancel:T},{default:c(()=>[t(h,{required:"auto"},{default:c(()=>[t(m,{rules:[{required:!0}],class:"m-3",modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=n=>u.value=n),placeholder:"备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["show"]),a[6]||(a[6]=g("i",{class:"block text-sm text-gray-600 bg-blue-50 border border-blue-200 rounded-lg p-4 -mb-4 my-4 italic leading-relaxed"}," 使用声明: 本网站只提供数据测算，承诺不向后端提交任何数据，网站持久层采用 indexedDB 技术，数据仅保存于使用者设备上。 ",-1))],64)}}};export{ce as default};
